<div class="language-switcher">
  {% if page.lang == 'ja' %}
    <span class="current-lang">日本語</span>
    {% if page.url contains '-en' %}
      <a href="{{ page.url | replace: '-en', '' | relative_url }}">English</a>
    {% else %}
      <a href="{{ page.url | replace: '.html', '-en.html' | relative_url }}">English</a>
    {% endif %}
  {% else %}
    {% if page.url contains '/en/' %}
      <a href="{{ page.url | replace: '/en/', '/' | relative_url }}">日本語</a>
    {% else %}
      <a href="{{ page.url | replace: '.html', '' | prepend: '/en' | append: '/' | relative_url }}">日本語</a>
    {% endif %}
    <span class="current-lang">English</span>
  {% endif %}
</div>

<style>
  .language-switcher {
    text-align: right;
    margin-bottom: 2rem;
    padding: 1rem;
    background-color: #f5f5f5;
    border-radius: 4px;
  }
  
  .language-switcher a {
    margin: 0 1rem;
    text-decoration: none;
    color: #0066cc;
  }
  
  .language-switcher .current-lang {
    font-weight: bold;
    margin: 0 1rem;
  }
</style>